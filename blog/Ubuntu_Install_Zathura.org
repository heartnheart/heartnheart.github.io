#+TITLE:       Ubuntu 14.04 Install Zathura Git Version
#+AUTHOR:      Xiaolong Zhang
#+EMAIL:       xlzhang@cs.hku.hk
#+DATE:        2015-02-12 Thu
#+URI:         /blog/%y/%m/%d/Ubuntu 14.04 Install Zathura Git Version
#+KEYWORDS:    Ubuntu,Zathura
#+TAGS:        Ubuntu,Zathura
#+LANGUAGE:    en
#+OPTIONS:     H:3 num:nil toc:nil \n:nil ::t |:t ^:nil -:nil f:t *:t <:t
#+DESCRIPTION: This blog describes how to install Zathura git version on Ubuntu 14.04

* Install =girara=
#+begin_src sh
git clone git://pwmt.org/girara.git
make
make install
#+end_src
If you encounter an error when doing =make=
#+begin_example
xlzhang@mesecina:~/code/girara$ make
The minium required version of GTK is 3.2
make: *** [.version-checks/GTK] Error 1
#+end_example
This is because =libgirara= dependens on =GTK+3=, so install =libgtk-3-dev= first.
#+begin_src sh
sudo apt-get install libgtk-3-dev
#+end_src

Then =make= again may result in another error:
#+begin_example
xlzhang@mesecina:~/code/girara$ make
 [CC] callbacks.c 
cc: error: unrecognized command line option ‘-fdiagnostics-color=always’
make: *** [callbacks.o] Error 1
#+end_example

This is because that =diagonistics-color= is an option not introduced until GCC 4.9. By checking =gcc --version=, we found that the default gcc version on Ubuntu 14.04:
#+NAME: print_gcc_ver
#+begin_src sh :results output verbatim :exports results
gcc --version
#+end_src
** Install GCC 4.9 on Ubuntu 14.04
To install gcc 4.9 on Ubuntu 14.04, you can install the upstream version of GCC from [[https://wiki.ubuntu.com/ToolChain#PPA_packages][Ubuntu Toolchain PPA]].
#+begin_src sh
sudo add-apt-repository ppa:ubuntu-toolchain-r/test
sudo apt-get update
sudo apt-get install gcc-4.9
#+end_src
** Set GCC 4.9 as the default gcc
Remove the previous gcc version from the default applications list (if already exists)
#+begin_src sh
sudo update-alternatives --remove-all gcc
#+end_src
Make GCC 4.9 the default compiler on the system
#+begin_src sh
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 20
sudo update-alternatives --config gcc
#+end_src
Now check the gcc version with =gcc --version= again
#+CALL: print_gcc_ver()






# Local Variables:
# org-confirm-babel-evaluate: nil
# End:
** Install Girara
Now you can install girara by =make insatll=.
** Install Zathura
#+begin_src sh
git clone git://pwmt.org/zathura.git
cd zathura
git checkout --track -b develop origin/develop
make
make install
#+end_src
If you see error as follows:
#+begin_example
zathura/content-type.c:11:19: fatal error: magic.h: No such file or directory
 #include <magic.h>
                   ^
compilation terminated.
make: *** [build/release/zathura/content-type.o] Error 1
#+end_example
Install =libmagic-dev=.

If you see error as follows:
#+begin_example
zathura/database-sqlite.c:3:21: fatal error: sqlite3.h: No such file or directory
 #include <sqlite3.h>
                     ^
compilation terminated.
make: *** [build/release/zathura/database-sqlite.o] Error 1
#+end_example
Install =libsqlite3-dev=.
** Can't view man pages
zathura needs Sphinx to build man pages, use
#+begin_src sh
sudo apt-get install python-sphinx
#+end_src
** How to use inverse search
By Control + Click
